###############################################################################
# WARNING=DO NOT USE THIS FILE FOR PRODUCTION
###############################################################################
ROUTER_URL_HTTP=http://analytics.localdev:50080
ROUTER_URL_HTTPS=https://analytics.localdev:50443
ADPSUPERUSER=adpsuperuser
ADPSUPERUSER_PASS=adppassword

###############################################################################
# Postgres image
###############################################################################
POSTGRES_USER=$ADPSUPERUSER
POSTGRES_PASSWORD=$ADPSUPERUSER_PASS
PGPASSWORD=$POSTGRES_PASSWORD
POSTGRES_DATABASE=unused
SHARED_DB__HOST=shared-database

###############################################################################
# Keycloak
###############################################################################
KC_BOOTSTRAP_ADMIN_USERNAME=admin
KC_BOOTSTRAP_ADMIN_PASSWORD=admin
KC_HTTP_RELATIVE_PATH=/auth
KC_REALM_NAME=analytics-data-platform
KEYCLOAK_URL=$ROUTER_URL_HTTP$KC_HTTP_RELATIVE_PATH
KEYCLOAK_URL_HTTPS=$ROUTER_URL_HTTPS$KC_HTTP_RELATIVE_PATH
KEYCLOAK_REALM=$KEYCLOAK_URL/realms/$KC_REALM_NAME
KEYCLOAK_REALM_HTTPS=$KEYCLOAK_URL_HTTPS/realms/$KC_REALM_NAME

###############################################################################
# MinIO
###############################################################################
MINIO_ROOT_USER=$ADPSUPERUSER
MINIO_ROOT_PASSWORD=$ADPSUPERUSER_PASS
MINIO_SCHEME=http
MINIO_BROWSER_REDIRECT_URL=$ROUTER_URL_HTTP/minio-console
MINIO_BUCKET_NAME=playground

###############################################################################
# OpenFGA
###############################################################################
SHARED_DB__OPENFGA_DB_NAME=openfga
OPENFGA_DATASTORE_ENGINE=postgres
OPENFGA_DATASTORE_URI=postgres://$POSTGRES_USER:$POSTGRES_PASSWORD@$SHARED_DB__HOST:5432/$SHARED_DB__OPENFGA_DB_NAME?sslmode=disable
OPENFGA_DATASTORE_MAX_OPEN_CONNS=50
OPENFGA_PLAYGROUND_ENABLED=false

###############################################################################
# Iceberg catalog
###############################################################################
SHARED_DB__LAKEKEEPER_DB_NAME=lakekeeper
LAKEKEEPER__PG_ENCRYPTION_KEY=This-is-NOT-Secure!
LAKEKEEPER__PG_DATABASE_URL_READ=postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@shared-database:5432/$SHARED_DB__LAKEKEEPER_DB_NAME
LAKEKEEPER__PG_DATABASE_URL_WRITE=postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@shared-database:5432/$SHARED_DB__LAKEKEEPER_DB_NAME
LAKEKEEPER__ENABLE_DEFAULT_PROJECT=false
LAKEKEEPER__OPENID_PROVIDER_URI=$KEYCLOAK_REALM
LAKEKEEPER__OPENID_ADDITIONAL_ISSUERS=$KEYCLOAK_REALM_HTTPS
#LAKEKEEPER__OPENID_SUBJECT_CLAIM=oid
LAKEKEEPER__OPENID_AUDIENCE=lakekeeper
LAKEKEEPER__AUTHZ_BACKEND=openfga
LAKEKEEPER__OPENFGA__ENDPOINT=http://openfga:8081
# Use host-accessible URI for browser-based UI
LAKEKEEPER__UI__OPENID_PROVIDER_URI=$KEYCLOAK_REALM_HTTPS
LAKEKEEPER__UI__OPENID_CLIENT_ID=lakekeeper
LAKEKEEPER__UI__OPENID_SCOPE="lakekeeper openid profile email"

# Bootstrapping
UV_LINK_MODE=copy
UV_PROJECT_ENVIRONMENT=/opt/uv-venv

###############################################################################
# Open Policy Agent
###############################################################################
LAKEKEEPER_URL=http://lakekeeper:8181
LAKEKEEPER_TOKEN_ENDPOINT=$KEYCLOAK_REALM
LAKEKEEPER_CLIENT_ID=trino
LAKEKEEPER_CLIENT_SECRET=s3cr3t
LAKEKEEPER_SCOPE=lakekeeper
LAKEKEEPER_LAKEKEEPER_WAREHOUSE=playground
TRINO_LAKEKEEPER_CATALOG_NAME=playground

###############################################################################
# Trino
###############################################################################
#TRINO_USER=superset
#TRINO_PASSWORD=adppassword

###############################################################################
# Superset
###############################################################################
# Metadata DB
SHARED_DB__SUPERSET_DB_NAME=superset
SUPERSET_DB_HOST=shared-database
SUPERSET_DB_USER=$ADPSUPERUSER
SUPERSET_DB_PASSWORD=$ADPSUPERUSER_PASS
SUPERSET_DB_NAME=$SHARED_DB__SUPERSET_DB_NAME
SUPERSET_DB_SCHEMA_NAME=playground
SUPERSET_DB_PORT=5432
SUPERSET_DB_DIALECT=postgresql

# Caching layer (match service name and port in compose file)
REDIS_HOST=superset-redis
REDIS_PORT=6379

# Admin user
# SUPERSET_ADMIN_USER=adpuser
# SUPERSET_ADMIN_FIRSTNAME=Admin
# SUPERSET_ADMIN_LASTNAME=Admin
# SUPERSET_ADMIN_EMAIL=test@example.com
# SUPERSET_ADMIN_PASSWORD=adppassword

# Environment/development settings
SUPERSET_CA_BUNDLE=/certs/rootCA.pem
PYTHONPATH=/app/docker/pythonpath
SCARF_ANALYTICS=false
FLASK_DEBUG=False
SUPERSET_LOG_LEVEL=info
SUPERSET_ENV=development
SUPERSET_PORT=8088
# Needs to match traefik rule in traefik-dynamic.yml
SUPERSET_APP_ROOT=/workspace/$SUPERSET_DB_SCHEMA_NAME

# Make sure you set this to a unique secure random value on production
SUPERSET_SECRET_KEY=0123456789
